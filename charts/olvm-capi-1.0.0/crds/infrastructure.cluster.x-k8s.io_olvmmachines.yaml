---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.16.4
  name: olvmmachines.infrastructure.cluster.x-k8s.io
spec:
  group: infrastructure.cluster.x-k8s.io
  names:
    categories:
    - cluster-api
    kind: OLVMMachine
    listKind: OLVMMachineList
    plural: olvmmachines
    shortNames:
    - olvmm
    singular: olvmmachine
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: True if the Machine is ready
      jsonPath: .status.conditions[:].status
      name: Ready
      type: string
    - description: Last transition time
      jsonPath: .status.conditions[:].lastTransitionTime
      name: Transition Time
      priority: 2
      type: string
    - description: Lifecycle message
      jsonPath: .status.conditions[:].message
      name: Message
      priority: 2
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: OLVMMachine specifies am OLVMMachine instance.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: OLVMMachineSpec defines the specification for a OLVMMachine
              resource.
            properties:
              bootDevice:
                description: BootDevice is the VM boot device
                type: string
              memory:
                description: Memory for VM in Mi, MB, Gi, GB, ec.
                type: string
              olvmClusterName:
                description: OLVMlusterName is the CAPI OLVMCluster resource name
                type: string
              ovirtClusterName:
                description: OVirtCluster is the oVirt cluster within a datacenter
                type: string
              ovirtVMTemplateName:
                description: OVirtVMTemplateName of a pre-existing oVirt VM template
                type: string
              providerID:
                description: |-
                  ProviderID is the identifier for the provider’s machine instance.
                  This field is set by the controller
                  ProviderID is expected to match the value set by the KCM cloud provider in the Nodes.
                  The Machine controller bubbles it up to the Machine CR, and it’s used to find the matching Node.
                  Any other consumers can use the providerID as the source of truth to match both Machines and Nodes.
                type: string
            required:
            - memory
            - olvmClusterName
            - ovirtClusterName
            type: object
          status:
            description: OLVMMachineStatus defines the status OLVMMachine resource.
            properties:
              addresses:
                description: |-
                  MachineAddress is a list of the host names, external IP addresses, pkg IP addresses,
                  external DNS names, and/or pkg DNS names for the provider’s machine instance
                items:
                  description: MachineAddress is the address of the machine
                  properties:
                    address:
                      type: string
                    type:
                      type: string
                  required:
                  - address
                  - type
                  type: object
                type: array
              conditions:
                description: Conditions are the list of conditions for the OLVMMachine.
                items:
                  description: MachineCondition describes the current condition of
                    the OLVMMachine.
                  properties:
                    lastTransitionTime:
                      description: LastTransitionTime is the last time the condition
                        transitioned from one status to another.
                      type: string
                    message:
                      description: Message is a human-readable message indicating
                        details about the last transition.
                      type: string
                    reason:
                      description: Reason for the condition.  This is a machine-readable
                        one word value.
                      type: string
                    status:
                      description: 'Status of the condition: one of `True`, `False`,
                        or `Unknown`.'
                      type: string
                    type:
                      description: Type of condition.
                      type: string
                  required:
                  - lastTransitionTime
                  - reason
                  - status
                  - type
                  type: object
                type: array
              failureDomains:
                additionalProperties:
                  description: FailureDomainSpec specifies a failuredomain
                  properties:
                    attributes:
                      additionalProperties:
                        type: string
                      description: Attributes are arbitrary attributes for users to
                        apply to a failure domain.
                      type: object
                    controlPlane:
                      description: ControlPlane indicates if failure domain is appropriate
                        for running control plane instances.
                      type: boolean
                  required:
                  - controlPlane
                  type: object
                description: |-
                  FailureDomains is the failure domains that machines should be placed in.
                  The maputil key is the FailureDomain name
                type: object
              failureMessage:
                description: |-
                  FailureMessage indicates there is a fatal problem reconciling the provider’s infrastructure;
                  meant to be a more descriptive value than failureReason
                type: string
              failureReason:
                description: |-
                  FailureReason indicates there is a fatal problem reconciling the provider’s infrastructure;
                  meant to be suitable for programmatic interpretation
                type: string
              lastObservedGeneration:
                description: |-
                  LastObservedGeneration is the latest generation of the OLVMMachine
                  that the controller_foundation has seen, but not necessarily reconciled.
                format: int64
                type: integer
              lastSuccessfulGeneration:
                description: LastSuccessfulGeneration is the last generation of the
                  OLVMMachine that was successfully reconciled.
                format: int64
                type: integer
              ovirt:
                properties:
                  clusterID:
                    type: string
                  clusterName:
                    type: string
                  virtualMachine:
                    properties:
                      CreateRequestSuccess:
                        type: boolean
                      creationError:
                        type: string
                      creationStatus:
                        type: string
                      lastGeneration:
                        type: string
                      status:
                        type: string
                      vmID:
                        type: string
                      vmName:
                        type: string
                    required:
                    - CreateRequestSuccess
                    type: object
                  vmTemplateID:
                    type: string
                  vmTemplateName:
                    type: string
                required:
                - virtualMachine
                type: object
              ready:
                description: Ready indicates the provider-specific infrastructure
                  has been provisioned and is ready
                type: boolean
            required:
            - ovirt
            - ready
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
